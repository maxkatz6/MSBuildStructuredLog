version: 1.1.{build}

branches:
  only:
    - main

environment:
  matrix:
    - job_name: macOS build
      appveyor_build_worker_image: macOS

matrix:
  fast_finish: true

for:
  -
    matrix:
      only:
        - job_name: macOS build
    environment:
      APPLE_ID_EMAIL:
        secure: PPiY59Zy8PGFgCy4aphyLDnit1eTW2nB3R3rW9iYisQ=
      APPLE_ID_PASSWORD:
        secure: Xqa3m49/axGFkH9nr8zZRLgMbFzY3rUUsRCXRxPt4B8=
      P12_BASE64:
        secure: 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
      P12_PASSWORD:
        secure: 2Sv8k0KiFzXcnzl+mmIfvQ==
      APPLE_TEAM_ID:
        secure: AnEDLgBUDM9+UAdcIOrMLQ==
      APPLE_CERT_NAME:
        secure: XiHIzjXfVB91xh+JHWUwatVVSmfbf2S7zZRxmfx9t5Q=
    init:
      - curl -sSL https://dot.net/v1/dotnet-install.sh | /bin/bash -s -- --channel 8.0
    build_script:
      - dotnet tool install Cake.Tool --create-manifest-if-needed
      - dotnet tool run dotnet-cake ./build-macos.cake --settings_skippackageversioncheck=true
    artifacts:
      - path: 'artifacts\StructuredLogViewer-*.zip'
        name: 'Structured Log Viewer macOS app'
    on_failure:
      - appveyor PushArtifact msbuild.binlog
